<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autolatina - Controle de Peças Esgotadas</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #1a3c8b;
            --secondary: #d32f2f;
            --accent: #ff9800;
            --light: #f5f7fa;
            --dark: #333;
            --gray: #666;
            --light-gray: #e0e0e0;
            --success: #4caf50;
        }

        body {
            background-color: #f0f2f5;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary), #0a2764);
            color: white;
            padding: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            font-size: 2.5rem;
            color: var(--accent);
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .logo span {
            color: var(--accent);
        }

        .filiais {
            display: flex;
            gap: 15px;
        }

        .filial-tag {
            background: rgba(255, 255, 255, 0.15);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        /* Main content */
        .app-title {
            text-align: center;
            margin-bottom: 30px;
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .app-title h2 {
            font-size: 1.8rem;
        }

        .app-title i {
            color: var(--secondary);
        }

        /* Dashboard */
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 900px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }

        /* Form section */
        .form-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .form-section h3 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-gray);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--gray);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--light-gray);
            border-radius: 6px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(26, 60, 139, 0.2);
        }

        .filial-select {
            display: flex;
            gap: 15px;
        }

        .filial-option {
            flex: 1;
            text-align: center;
            padding: 15px;
            border: 2px solid var(--light-gray);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filial-option:hover {
            background-color: rgba(26, 60, 139, 0.05);
        }

        .filial-option.active {
            border-color: var(--primary);
            background-color: rgba(26, 60, 139, 0.1);
        }

        .filial-option i {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .btn {
            padding: 14px 25px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: #0a2764;
        }

        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }

        .btn-secondary:hover {
            background-color: #b71c1c;
        }

        .btn-success {
            background-color: var(--success);
            color: white;
        }

        .btn-success:hover {
            background-color: #3d8b40;
        }

        .btn-block {
            width: 100%;
        }

        /* List section */
        .list-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .list-controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .filter-filial {
            display: flex;
            gap: 10px;
        }

        .filter-btn {
            padding: 8px 15px;
            border: 1px solid var(--light-gray);
            border-radius: 6px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-btn.active {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background-color: var(--primary);
            color: white;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--light-gray);
        }

        tbody tr:hover {
            background-color: rgba(0, 0, 0, 0.02);
        }

        .filial-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .filial-1 {
            background-color: rgba(26, 60, 139, 0.1);
            color: var(--primary);
        }

        .filial-2 {
            background-color: rgba(211, 47, 47, 0.1);
            color: var(--secondary);
        }

        .urgent {
            color: var(--secondary);
            font-weight: 600;
        }

        .delete-btn {
            background: none;
            border: none;
            color: var(--secondary);
            cursor: pointer;
            font-size: 1.1rem;
        }

        /* Stats section */
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .stats {
                grid-template-columns: 1fr;
            }
        }

        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
        }

        .stat-card i {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .stat-card.filial-1 i {
            color: var(--primary);
        }

        .stat-card.filial-2 i {
            color: var(--secondary);
        }

        .stat-card.all i {
            color: var(--success);
        }

        .stat-value {
            font-size: 2.2rem;
            font-weight: 700;
            margin: 10px 0;
        }

        .stat-label {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Print styles */
        @media print {
            header, .app-title, .form-section, .list-controls .btn, .delete-btn, .stats {
                display: none !important;
            }

            .list-section {
                box-shadow: none;
                padding: 0;
            }

            table {
                font-size: 12px;
            }

            th, td {
                padding: 8px;
            }

            .print-header {
                display: block !important;
                text-align: center;
                margin-bottom: 20px;
            }
        }

        .print-header {
            display: none;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 20px 0;
            margin-top: 40px;
            color: var(--gray);
            border-top: 1px solid var(--light-gray);
            font-size: 0.9rem;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
        }

        .empty-state i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--light-gray);
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-car logo-icon"></i>
                <div>
                    <h1>AUTOLATINA <span>CONTROLE</span></h1>
                    <p>Sistema de Gerenciamento de Peças</p>
                </div>
            </div>
            <div class="filiais">
                <div class="filial-tag">
                    <i class="fas fa-truck"></i> Autolatina Truck Service
                </div>
                <div class="filial-tag">
                    <i class="fas fa-warehouse"></i> Cascavel Peças
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="app-title">
            <i class="fas fa-exclamation-triangle"></i>
            <h2>Controle de Peças Esgotadas</h2>
        </div>

        <div class="dashboard">
            <div class="form-section">
                <h3><i class="fas fa-plus-circle"></i> Registrar Peça Esgotada</h3>
                <form id="pecaForm">
                    <div class="form-group">
                        <label>Filial</label>
                        <div class="filial-select">
                            <div class="filial-option active" data-filial="1">
                                <i class="fas fa-truck"></i>
                                <div>Autolatina Truck Service</div>
                            </div>
                            <div class="filial-option" data-filial="2">
                                <i class="fas fa-warehouse"></i>
                                <div>Cascavel Peças</div>
                            </div>
                        </div>
                        <input type="hidden" id="filial" value="1">
                    </div>

                    <div class="form-group">
                        <label for="codigo">Código da Peça *</label>
                        <input type="text" id="codigo" class="form-control" required placeholder="Ex: AUT2024001">
                    </div>

                    <div class="form-group">
                        <label for="nome">Nome da Peça *</label>
                        <input type="text" id="nome" class="form-control" required placeholder="Ex: Filtro de Óleo">
                    </div>

                    <div class="form-group">
                        <label for="veiculo">Veículo / Aplicação</label>
                        <input type="text" id="veiculo" class="form-control" placeholder="Ex: VW Delivery, Mercedes Atego">
                    </div>

                    <div class="form-group">
                        <label for="quantidade">Quantidade em Falta</label>
                        <input type="number" id="quantidade" class="form-control" value="1" min="1">
                    </div>

                    <div class="form-group">
                        <label for="prioridade">Prioridade</label>
                        <select id="prioridade" class="form-control">
                            <option value="normal">Normal</option>
                            <option value="alta">Alta</option>
                            <option value="urgente">Urgente</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="observacao">Observações</label>
                        <textarea id="observacao" class="form-control" rows="3" placeholder="Detalhes adicionais sobre a peça..."></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-save"></i> Registrar Peça Esgotada
                    </button>
                </form>
            </div>

            <div class="list-section">
                <h3><i class="fas fa-list"></i> Peças Esgotadas</h3>
                <div class="list-controls">
                    <div class="filter-filial">
                        <button class="filter-btn active" data-filter="todas">Todas</button>
                        <button class="filter-btn" data-filter="1">Truck Service</button>
                        <button class="filter-btn" data-filter="2">Cascavel Peças</button>
                    </div>
                    <div>
                        <button class="btn btn-success" id="printBtn">
                            <i class="fas fa-print"></i> Imprimir Relatório
                        </button>
                        <button class="btn btn-secondary" id="clearBtn">
                            <i class="fas fa-trash-alt"></i> Limpar Lista
                        </button>
                    </div>
                </div>

                <div class="print-header">
                    <h2>Relatório de Peças Esgotadas - Autolatina</h2>
                    <p>Gerado em: <span id="print-date"></span></p>
                    <p>Filial: <span id="print-filial">Todas</span></p>
                </div>

                <div class="table-container">
                    <table id="pecasTable">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Código</th>
                                <th>Peça</th>
                                <th>Filial</th>
                                <th>Quantidade</th>
                                <th>Prioridade</th>
                                <th>Ação</th>
                            </tr>
                        </thead>
                        <tbody id="pecasBody">
                            <!-- As peças serão inseridas aqui via JavaScript -->
                        </tbody>
                    </table>
                </div>
                <div id="emptyState" class="empty-state">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>Nenhuma peça esgotada registrada</h3>
                    <p>Adicione peças esgotadas usando o formulário ao lado</p>
                </div>
            </div>
        </div>

        <div class="stats">
            <div class="stat-card filial-1">
                <i class="fas fa-truck"></i>
                <div class="stat-value" id="countFilial1">0</div>
                <div class="stat-label">Peças Esgotadas - Truck Service</div>
            </div>
            <div class="stat-card filial-2">
                <i class="fas fa-warehouse"></i>
                <div class="stat-value" id="countFilial2">0</div>
                <div class="stat-label">Peças Esgotadas - Cascavel Peças</div>
            </div>
            <div class="stat-card all">
                <i class="fas fa-clipboard-check"></i>
                <div class="stat-value" id="countTotal">0</div>
                <div class="stat-label">Total de Peças para Comprar</div>
            </div>
        </div>
    </main>

    <footer class="container">
        <p>Sistema de Controle de Peças Esgotadas - Autolatina &copy; <span id="currentYear"></span></p>
        <p>Este sistema é destinado ao controle interno das filiais Autolatina Truck Service e Cascavel Peças</p>
    </footer>

    <script>
        // Dados iniciais (poderiam vir de um banco de dados)
        let pecas = JSON.parse(localStorage.getItem('autolatina-pecas')) || [
            {
                id: 1,
                codigo: 'AUT2024001',
                nome: 'Filtro de Óleo',
                veiculo: 'VW Delivery, Mercedes Atego',
                quantidade: 3,
                prioridade: 'alta',
                observacao: 'Precisamos com urgência para manutenção programada',
                filial: '1',
                data: '2023-10-15'
            },
            {
                id: 2,
                codigo: 'CAS2024005',
                nome: 'Pastilha de Freio',
                veiculo: 'Ford Cargo 2428',
                quantidade: 2,
                prioridade: 'urgente',
                observacao: 'Cliente aguardando para entrega amanhã',
                filial: '2',
                data: '2023-10-16'
            },
            {
                id: 3,
                codigo: 'AUT2024010',
                nome: 'Correia Dentada',
                veiculo: 'Scania R450',
                quantidade: 1,
                prioridade: 'normal',
                observacao: 'Preventiva para próxima semana',
                filial: '1',
                data: '2023-10-17'
            }
        ];

        // Elementos do DOM
        const pecasBody = document.getElementById('pecasBody');
        const pecaForm = document.getElementById('pecaForm');
        const filialOptions = document.querySelectorAll('.filial-option');
        const filialInput = document.getElementById('filial');
        const filterButtons = document.querySelectorAll('.filter-btn');
        const printBtn = document.getElementById('printBtn');
        const clearBtn = document.getElementById('clearBtn');
        const emptyState = document.getElementById('emptyState');
        const countFilial1 = document.getElementById('countFilial1');
        const countFilial2 = document.getElementById('countFilial2');
        const countTotal = document.getElementById('countTotal');
        const printDate = document.getElementById('print-date');
        const printFilial = document.getElementById('print-filial');

        // Filial selecionada no formulário
        let filialSelecionada = '1';
        // Filtro atual da lista
        let filtroAtual = 'todas';

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar data atual
            updateCurrentDate();
            
            // Atualizar ano no footer
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            // Carregar peças
            renderPecas();
            updateStats();
            
            // Configurar eventos
            setupEventListeners();
        });

        // Configurar todos os event listeners
        function setupEventListeners() {
            // Seleção de filial no formulário
            filialOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const filial = this.getAttribute('data-filial');
                    filialSelecionada = filial;
                    filialInput.value = filial;
                    
                    // Atualizar visual da seleção
                    filialOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // Envio do formulário
            pecaForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Obter valores do formulário
                const codigo = document.getElementById('codigo').value;
                const nome = document.getElementById('nome').value;
                const veiculo = document.getElementById('veiculo').value;
                const quantidade = parseInt(document.getElementById('quantidade').value);
                const prioridade = document.getElementById('prioridade').value;
                const observacao = document.getElementById('observacao').value;
                
                // Criar nova peça
                const novaPeca = {
                    id: Date.now(), // ID único baseado no timestamp
                    codigo: codigo,
                    nome: nome,
                    veiculo: veiculo,
                    quantidade: quantidade,
                    prioridade: prioridade,
                    observacao: observacao,
                    filial: filialSelecionada,
                    data: getCurrentDate()
                };
                
                // Adicionar à lista
                pecas.push(novaPeca);
                
                // Salvar no localStorage
                saveToLocalStorage();
                
                // Atualizar a interface
                renderPecas();
                updateStats();
                
                // Resetar formulário
                pecaForm.reset();
                document.getElementById('quantidade').value = 1;
                
                // Feedback visual
                alert('Peça registrada com sucesso!');
            });

            // Filtros da lista
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const filter = this.getAttribute('data-filter');
                    filtroAtual = filter;
                    
                    // Atualizar visual dos botões
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Atualizar lista
                    renderPecas();
                    
                    // Atualizar texto no relatório
                    if (filter === 'todas') {
                        printFilial.textContent = 'Todas';
                    } else if (filter === '1') {
                        printFilial.textContent = 'Autolatina Truck Service';
                    } else {
                        printFilial.textContent = 'Cascavel Peças';
                    }
                });
            });

            // Botão de impressão
            printBtn.addEventListener('click', function() {
                printDate.textContent = getCurrentDateFormatted();
                window.print();
            });

            // Botão de limpar lista
            clearBtn.addEventListener('click', function() {
                if (confirm('Tem certeza que deseja limpar toda a lista de peças esgotadas?')) {
                    pecas = [];
                    saveToLocalStorage();
                    renderPecas();
                    updateStats();
                }
            });
        }

        // Renderizar a lista de peças
        function renderPecas() {
            // Filtrar peças conforme filtro atual
            let pecasFiltradas = pecas;
            if (filtroAtual !== 'todas') {
                pecasFiltradas = pecas.filter(peca => peca.filial === filtroAtual);
            }
            
            // Limpar tabela
            pecasBody.innerHTML = '';
            
            // Mostrar/ocultar empty state
            if (pecasFiltradas.length === 0) {
                emptyState.style.display = 'block';
                return;
            } else {
                emptyState.style.display = 'none';
            }
            
            // Adicionar cada peça à tabela
            pecasFiltradas.forEach(peca => {
                const row = document.createElement('tr');
                
                // Determinar classe de prioridade
                let prioridadeClass = '';
                let prioridadeText = '';
                switch(peca.prioridade) {
                    case 'alta':
                        prioridadeClass = 'urgent';
                        prioridadeText = 'Alta';
                        break;
                    case 'urgente':
                        prioridadeClass = 'urgent';
                        prioridadeText = 'Urgente';
                        break;
                    default:
                        prioridadeText = 'Normal';
                }
                
                // Determinar nome da filial
                let filialNome = peca.filial === '1' ? 'Truck Service' : 'Cascavel Peças';
                let filialClass = peca.filial === '1' ? 'filial-1' : 'filial-2';
                
                row.innerHTML = `
                    <td>${formatDate(peca.data)}</td>
                    <td><strong>${peca.codigo}</strong></td>
                    <td>
                        <div><strong>${peca.nome}</strong></div>
                        <small class="text-muted">${peca.veiculo || 'Sem aplicação específica'}</small>
                    </td>
                    <td><span class="filial-badge ${filialClass}">${filialNome}</span></td>
                    <td>${peca.quantidade}</td>
                    <td class="${prioridadeClass}">${prioridadeText}</td>
                    <td>
                        <button class="delete-btn" onclick="deletePeca(${peca.id})" title="Remover peça">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                
                pecasBody.appendChild(row);
            });
        }

        // Atualizar estatísticas
        function updateStats() {
            const count1 = pecas.filter(peca => peca.filial === '1').length;
            const count2 = pecas.filter(peca => peca.filial === '2').length;
            const total = pecas.length;
            
            countFilial1.textContent = count1;
            countFilial2.textContent = count2;
            countTotal.textContent = total;
        }

        // Deletar uma peça
        function deletePeca(id) {
            if (confirm('Tem certeza que deseja remover esta peça da lista?')) {
                pecas = pecas.filter(peca => peca.id !== id);
                saveToLocalStorage();
                renderPecas();
                updateStats();
            }
        }

        // Salvar dados no localStorage
        function saveToLocalStorage() {
            localStorage.setItem('autolatina-pecas', JSON.stringify(pecas));
        }

        // Funções auxiliares de data
        function getCurrentDate() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }

        function getCurrentDateFormatted() {
            const now = new Date();
            return now.toLocaleDateString('pt-BR') + ' ' + now.toLocaleTimeString('pt-BR', {hour: '2-digit', minute: '2-digit'});
        }

        function updateCurrentDate() {
            printDate.textContent = getCurrentDateFormatted();
        }
    </script>
</body>
</html>